---
import Logo from "../shared/Logo.astro";
import NavItem from "../shared/NavItem.astro";
import MenuCollapseButton from "../blocks/MenuCollapseButton.astro";
import ButtonLink from "../shared/ButtonLink.astro";
import NavigationCollapse from "../blocks/NavigationCollapse.astro";
import { NAVIGATION_ITEM } from "../../config";
import Container from "../shared/Container.astro";
import { Image } from "astro:assets";
import bannerShape from "../../assets/images/banner-shape.png";
import { isActivePage } from "../../js/helper";
---

<header
  class:list={["absolute inset-x-0 top-0 py-6 z-20"]}
  data-mode={import.meta.env.MODE}
>
  <Container>
    <nav class="relative flex items-center justify-between">
      <MenuCollapseButton className={"hidden md:block lg:hidden"} />
      <Logo />
      <ul
        class="hidden lg:flex flex-row font-medium rounded-lg"
        data-href={Astro.url.pathname}
      >
        {
          NAVIGATION_ITEM.map((item) => (
            <li
              class:list={[
                "my-auto menu-item relative",
                isActivePage(Astro.url.pathname, item.href) ? "active" : "",
              ]}
            >
              <a
                href={item.href}
                class=" duration-300 font-medium ease-linear py-2 px-4"
                aria-current="page"
              >
                {item.title}
              </a>
              <div class="menu-item__decoration pointer-events-none absolute top-full left-1/2 overflow-hidden children:w-full children:h-auto w-[9.25rem] -ml-[4.625rem] md:w-[4.25rem] md:-ml-[2.125rem] text-[#4452f5]">
                <svg
                  preserveAspectRatio="xMidYMid slice"
                  width="69"
                  height="8"
                  viewBox="0 0 69 8"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                  class="stroke-current"
                >
                  <path
                    d="M1.13838 6.1242C6.812 2.92788 21.2563 1.56082 31.5963 2.78176C42.4294 4.06092 49.6969 8.06731 68.2783 2.76965"
                    stroke-width="2"
                    pathLength="1"
                  />
                </svg>
              </div>
            </li>
          ))
        }
      </ul>

      <MenuCollapseButton className={"sm:block md:hidden"} />
      <ButtonLink
        text="Let's Talk"
        className="hidden md:block text-sm bg-primary"
        href="#"
        variant="primary"
      />
      <NavigationCollapse />
    </nav>
  </Container>
</header>
<Image class:list={["absolute"]} src={bannerShape} alt="banner shape" />
<div
  id="drawer-backdrop"
  class="bg-gray-900 bg-opacity-50 fixed inset-0 hidden"
>
</div>

<style>
  .menu-item.active .stroke-current > path {
    stroke-dashoffset: 0;
  }

  .menu-item .stroke-current > path {
    stroke-dasharray: 1;
    stroke-dashoffset: 1;
  }

  .menu-item:hover .stroke-current > path {
    stroke-dashoffset: 0;
    transition: all 0.25s ease-in-out;
  }
</style>
